<!DOCTYPE html>
<html>
<head>
  <title>Green House</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/css/bootstrap.min.css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.3.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.0/animate.min.css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/angularjs-toaster/0.4.10/toaster.min.css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.2.0/animate.min.css" />

  <style type="text/css">
    /*body {
      padding-top: 80px;
    }*/
    ul>li>a.navlink {
      padding:7px;
    }

    .green {
      color: green;
    }

    .yellow {
      color: yellow;
    }

    .red {
      color: #a94442;
    }
  </style>
</head>
<body>

  <div>

    <div data-ng-include="'header.html'"></div>

    <div class="container body-content ui-view-container" role="main" style="margin-bottom:50px;">
      <div ng-view data-ng-view-animate="zoomIn"></div>
    </div>

    <div data-ng-include="'footer.html'"></div>

  </div>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.2/js/bootstrap.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.0/js/toastr.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.3.0/bootbox.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.12/angular-sanitize.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.8/angular-route.min.js"></script>
  <!--<script src=" />/cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.13/angular-ui-router.min.js"></script>-->
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.12/angular-animate.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.12.0/ui-bootstrap-tpls.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/angular-ui-utils/0.1.1/angular-ui-utils.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.1/Chart.min.js"></script>


  <script type="text/ng-template" id="header.html">
    <nav class="navbar navbar-default text-center">
      <div class="container">

        <div class="navbar-header text-center">
          <!--<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar123" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>-->
          <a class="navbar-brand" href="/#/"><i class="fa fa-leaf green"></i> Green House</a>
        </div>


        <!--<div id="navbar123" class="navbar-collapse collapse" aria-expanded="false" style="height: 1px;">-->
        <ul class="nav navbar-nav">
          <li title="Click to refresh new data">
            <a href="#" class="navlink">
              <i class="fa fa-refresh fa-lg green" style="position:relative;top:10px; "></i>
              <span>2015 May 22 13:32:15</span><br />
              <small style="margin-left:20px;">Click to refresh new data</small>
            </a>
          </li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="#" class="navlink">
              <div class="btn-group" role="group">
                <span type="button" class="btn btn-primary active">C&deg;</span>
                <span type="button" class="btn btn-default">F&deg;</span>
              </div>
            </a>
          </li>
        </ul>
        <!--</div>  /.navbar-collapse -->

      </div>   <!-- /.container-fluid -->
    </nav>
  </script>

  <script type="text/ng-template" id="footer.html">

    <footer class="navbar navbar-default navbar-fixed-bottom text-center">
      <div class="container">
        <!--<ul class="nav navbar-nav animated fadeIn">
          <li><a target="_blank" href="https://github.com/miticv/ArduinoGreenHouseApp">&copy; 2015 - Arduino Green House App <i class="fa fa-external-link"></i></a></li>
        </ul>-->
        <ul class="nav navbar-nav navbar-right">
          <li><a ng-hide="layout.isLoggedIn" href="/#/admin"><i class="fa fa-wrench"></i> admin</a></li>
        </ul>
      </div>
    </footer>
  </script>

  <script type="text/ng-template" id="home.html">

    <div class="row">
      <div class="col-sm-12">
        <table class="table">
          <caption>System statistics</caption>
          <tbody>
            <tr class="success">
              <td><i class="fa fa-heartbeat green"></i> System running for <span>4 days</span> since last reboot </td>
              <td><i class="fa fa-tachometer green"></i> System is healthy with <span>417</span>b or Free RAM</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-6 table-responsive">
        <table class="table">
          <caption>Air statistics</caption>
          <thead>
            <tr class="bg-primary"><td>Air</td><td> Out</td><td>In</td></tr>
          </thead>
          <tbody>
            <tr class="success"><td>Temperature</td><td><span class="badge">10 C&deg;</span></td><td><span class="label-success badge">10 C&deg;</span></td></tr>
            <tr class="success"><td>Humidity</td><td> <span class="badge">80 &#37;</span></td><td><span class="badge">80 &#37;</span></td></tr>
            <tr class="success"><td>Heat Index</td><td> <span class="badge">32 </span></td><td><span class="badge">32 </span></td></tr>
            <tr class="success"><td>Light</td><td> <span class="badge">780 lux</span></td><td><span class="badge">780 lux</span></td></tr>
          </tbody>
        </table>
      </div><!-- /.col-sm-6 -->
      <div class="col-sm-6  table-responsive">
        <table class="table">
          <caption>Water Statistics</caption>
          <thead>
            <tr class="bg-primary"><td>Water</td><td></td></tr>
          </thead>
          <tbody>
            <tr class="success"><td>Pool Level</td><td><span class="badge">5 m</span></td></tr>
            <tr class="success"><td>Top Temperature</td><td><span class="badge">12 C&deg;</span></td></tr>
            <tr class="success"><td>Bottom Temperature</td><td><span class="badge">12 C&deg; </span></td></tr>
            <tr class="success"><td>Pump Running</td><td><i class="fa fa-cog fa-spin fa-lg green"></i></td></tr>
          </tbody>
        </table>

      </div><!-- /.col-sm-6 -->
    </div><!--/row-->

    <div class="row">
      <div class="col-sm-6 table-responsive">
        <table class="table">
          <caption>Bed statistics</caption>
          <thead>
            <tr class="bg-primary"><td>Bed</td><td> Level</td><td></td></tr>
          </thead>
          <tbody>
            <tr class="success"><td>BED A</td><td><span class="badge">1</span></td><td><span class="label-success badge">10 C&deg;</span></td></tr>
            <tr class="success"><td>BED B</td><td><span class="badge">1</span></td><td><span class="badge">80 &#37;</span></td></tr>
            <tr class="success"><td>BED C</td><td><span class="badge">1 </span></td><td><span class="badge">32 </span></td></tr>
            <tr class="success"><td>BED D</td><td><span class="badge">1</span></td><td><span class="badge">780 lux</span></td></tr>
            <tr class="success"><td>BED A</td><td><span class="badge">2</span></td><td><span class="label-success badge">10 C&deg;</span></td></tr>
            <tr class="success"><td>BED B</td><td><span class="badge">2</span></td><td><span class="badge">80 &#37;</span></td></tr>
            <tr class="success"><td>BED C</td><td><span class="badge">2</span></td><td><span class="badge">32 </span></td></tr>
            <tr class="success"><td>BED D</td><td><span class="badge">2</span></td><td><span class="badge">780 lux</span></td></tr>
          </tbody>
        </table>
      </div><!-- /.col-sm-6 -->
      <div class="col-sm-6  table-responsive">
        <table class="table">
          <caption>Tower Statistics</caption>
          <thead>
            <tr class="bg-primary"><td>Tower</td><td></td></tr>
          </thead>
          <tbody>
            <tr class="success"><td>Tower 1</td><td><span class="badge">5 m</span></td></tr>
            <tr class="success"><td>Tower 2</td><td><span class="badge">5 m</span></td></tr>
            <tr class="success"><td>Tower 3</td><td><span class="badge">5 m</span></td></tr>
            <tr class="success"><td>Tower 4</td><td><span class="badge">5 m</span></td></tr>
            <tr class="success"><td>Tower 5</td><td><span class="badge">5 m</span></td></tr>
            <tr class="success"><td>Tower 6</td><td><span class="badge">5 m</span></td></tr>
            <tr class="success"><td>Tower 7</td><td><span class="badge">5 m</span></td></tr>
            <tr class="success"><td>Tower 8</td><td><span class="badge">5 m</span></td></tr>

          </tbody>
        </table>

      </div><!-- /.col-sm-6 -->
    </div><!--/row-->

  </script>

  <script type="text/ng-template" id="admin.html">

    <div class="row">
      <div class="col-sm-12">
        <table class="table">
          <caption>System statistics</caption>
          <tbody>
            <tr class="success">
              <td><i class="fa fa-rocket green fa-lg"></i> System running for <strong><span class="green">4 days</span></strong> since last reboot </td>
              <td><i class="fa fa-bar-chart green fa-lg"></i> System is healthy with <strong><span class="green">417b</span></strong> to <strong><span class="green">513b</span></strong> of Free RAM</td>
              <td><i class="fa fa-recycle green fa-lg"></i> System has been booted <strong><span class="green">51</span></strong> times since <span class="green">Feb 5 2015</span></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12">        
        <table class="table">
          <caption> Update Device Time</caption>
          <tbody>
            <tr>
              <td class="success">
                <form class="form-inline">
                  <div class="form-group">
                    <label class="sr-only" for="newDateTime">New Date / Time</label>
                    <div class="input-group">
                      <!--<div class="input-group-addon">$</div>-->
                      <input type="datetime" class="form-control" id="newDateTime" placeholder="Set new date / time">
                      <!--<div class="input-group-addon">.00</div>-->
                    </div>
                  </div>
                  <button type="submit" class="btn btn-primary">Submit</button>
                </form>
              </td>
              <td class="success">
                  Current Date Time on Device is <strong><span class="green">2015 May 22 13:42:22 </span></strong>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12">
        
          <table class="table">
            <caption> Change Settings</caption>
            <tbody>
              <tr class="success">
                <td>
                  <form class="form-inline">
                    <div class="form-group">
                      <label class="sr-only" for="currentPass">Current Password</label>
                      <input type="email" class="form-control" id="currentPass" placeholder="Current Password">
                    </div>
                    <div class="form-group">
                      <label class="sr-only" for="newPass">New Password</label>
                      <input type="password" class="form-control" id="newPass" placeholder="Password">
                    </div>
                    <br/><br />
                    <div class="form-group">
                      <div class="">
                        <div class="checkbox">
                          <label>
                            Log http request in log file: <input type="checkbox"> 
                          </label>
                        </div>
                      </div>
                    </div>
                    <br /><br />
                    <div class="form-group">
                      <div class="">
                        <div class="checkbox">
                          <label>
                            Log Ram usage in log file: <input type="checkbox">
                          </label>
                        </div>
                      </div>
                    </div>
                    <br /><br />
                    <div class="form-group">
                      <div class="">
                        <div class="checkbox">
                          <label>
                            Set Sensor log frequency: <input type="checkbox">
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="form-group">
                      <div class="">
                        <button type="submit" class="btn btn-primary">Submit</button>
                      </div>
                    </div>
                  </form>
                </td>
              </tr>

             
              <!--<tr class="success">
                <td>
                  
                </td>
               
              </tr>-->
              <!--<tr class="success">
                <td><button type="submit" class="btn btn-default">Sign in</button></td>
                <td><i class="fa fa-tachometer green"></i> Change Admin Password READY</td>
                <td><i class="fa fa-tachometer green"></i> Log http request in log file (Y N) READY</td>
                <td><i class="fa fa-tachometer green"></i> Log Ram usage in log file (Y N) READY</td>
                <td><i class="fa fa-tachometer green"></i> Set Sensor log frequency (10-0, 30-1, 60-2 min) READY</td>
                <td><i class="fa fa-tachometer green"></i> Set Sensor ranges - triger actions</td>
                <td><i class="fa fa-tachometer green"></i> Auto Fish Feeder</td>
                <td><i class="fa fa-tachometer green"></i> Send Email</td>
                <td><i class="fa fa-tachometer green"></i> Send Text (https://www.twilio.com/sms/pricing)</td>
                <td><i class="fa fa-tachometer green"></i> Change IP and MAC address (maybe i can change port too but harder?)[need to reboot after change]</td>
              </tr>-->
            </tbody>
          </table>
        
      </div>
    </div>

    <div class="row">
      <div class="col-sm-12">
        <table class="table">
          <caption> Maintenance</caption>
          <tbody>
            <tr class="success">
              <td><i class="fa fa-tachometer green"></i> View files (Links) READY</td>
              <td><i class="fa fa-tachometer green"></i> View sessions ADMIN</td>
              <td><i class="fa fa-tachometer green"></i> Reboot ADMIN </td>             
            </tr>
          </tbody>
        </table>
      </div>
    </div>

  </script>



  <script>
    angular.module('greenhouse', ['ngRoute']).
      config(['$routeProvider', function ($routeProvider) {
        $routeProvider.
         when("/", { templateUrl: "home.html", controller: "homeController" }).
         when("/admin", { templateUrl: "admin.html", controller: "adminController" }).
         otherwise({ redirectTo: '/' });
      }]);

    angular.module('greenhouse').
      service("greenApiService", ['$http', '$q', function ($http, $q) {

        return ({

          getSensorData: getSensorData,
          getHistoryLog: getHistoryLog,
          getMonthData: getMonthData,
          getYearData: getYearData,

          isAdmin: isAdmin,
          setDateTime: setDateTime,
          doReboot: doReboot,
          viewFiles: viewFiles,
          setRefreshTime: setRefreshTime

        });

        function getSensorData() {
          //var request = $http({
          //  method: "get",
          //  url: "isadmin",
          //  params: {
          //    action: "get"
          //  }
          //});
          //return (request.then(handleSuccess, handleError));
          return { "Datetime": "2015-02-13 01:22:14", "AnalogSignal1": "5", "AnalogSignal2": "10", "AnalogSignal3": "11" };
        }

        function getHistoryLog() {
          var request = $http({
            method: "get",
            url: "admin",
            params: {
              action: "get"
            }
          });
          return (request.then(handleSuccess, handleError));
        }

        function getMonthData() {
          var request = $http({
            method: "get",
            url: "admin",
            params: {
              action: "get"
            }
          });
          return (request.then(handleSuccess, handleError));
        }

        function getYearData() {
          var request = $http({
            method: "get",
            url: "admin",
            params: {
              action: "get"
            }
          });
          return (request.then(handleSuccess, handleError));
        }

        //ADMIN FUNCTIONS
        function isAdmin(pass) {

          var request = $http({
            method: "delete",
            url: "api/index.cfm",
            params: {
              action: "post"
            },
            data: {
              id: id
            }
          });

          return (request.then(handleSuccess, handleError));

        }

        function setDateTime(year, month, day, hour, min, sec, week) {

          var request = $http({
            method: "delete",
            url: "api/index.cfm",
            params: {
              action: "post"
            },
            data: {
              id: id
            }
          });

          return (request.then(handleSuccess, handleError));

        }

        function doReboot() {

          var request = $http({
            method: "delete",
            url: "api/index.cfm",
            params: {
              action: "post"
            },
            data: {
              id: id
            }
          });

          return (request.then(handleSuccess, handleError));

        }

        function viewFiles() {

          var request = $http({
            method: "delete",
            url: "api/index.cfm",
            params: {
              action: "post"
            },
            data: {
              id: id
            }
          });

          return (request.then(handleSuccess, handleError));

        }

        function setRefreshTime(pariod) {

          var request = $http({
            method: "delete",
            url: "api/index.cfm",
            params: {
              action: "post"
            },
            data: {
              id: id
            }
          });

          return (request.then(handleSuccess, handleError));

        }

        function handleError(response) {
          if (
              !angular.isObject(response.data) ||
              !response.data.message
              ) {
            return ($q.reject("An unknown error occurred."));
          }
          return ($q.reject(response.data.message));
        }

        function handleSuccess(response) {
          return (response.data);
        }
      }]);


    angular.module('greenhouse').
      controller('homeController', ['$scope', 'greenApiService', function ($scope, greenApiService) {

        $scope.getData = function () {
          greenApiService.getSensorData();
        };

      }]);

    angular.module('greenhouse').
      controller('adminController', ['$scope', 'greenApiService', function ($scope, greenApiService) {

      }]);


  </script>

  <script>
    $(document).ready(function () {
      angular.bootstrap(document, ['greenhouse']);
      //$('[data-toggle="tooltip"]').tooltip();
    });
  </script>

</body>
</html>